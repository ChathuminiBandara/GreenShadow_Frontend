<div id="fields" class="section py-4">
    <div class="container">
        <h2 class="mb-4 text-success fw-bold">Field Management</h2>

        <!-- Search and Filter -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <input type="text" class="form-control w-25" id="searchField" placeholder="Search Fields...">
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addFieldModal">+ Add Field</button>
        </div>

        <!-- Fields Table -->
        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-success">
                <tr>
                    <th>Field ID</th>
                    <th>Field Name</th>
                    <th>Size (Acres)</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="fieldsTable">
                <!-- Dynamic Content Goes Here -->
                <tr>
                    <td>FLD-001</td>
                    <td>North Field</td>
                    <td>10</td>
                    <td>Farm A</td>
                    <td><span class="badge bg-success">Planted</span></td>
                    <td>
                        <button class="btn btn-info btn-sm" onclick="editField('FLD-001')"><i class="bi bi-pencil"></i></button>
                        <button class="btn btn-danger btn-sm" onclick="deleteField('FLD-001')"><i class="bi bi-trash"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>FLD-002</td>
                    <td>South Field</td>
                    <td>15</td>
                    <td>Farm B</td>
                    <td><span class="badge bg-warning">Needs Attention</span></td>
                    <td>
                        <button class="btn btn-info btn-sm" onclick="editField('FLD-002')"><i class="bi bi-pencil"></i></button>
                        <button class="btn btn-danger btn-sm" onclick="deleteField('FLD-002')"><i class="bi bi-trash"></i></button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Map Section -->
        <div class="mt-5">
            <h4 class="mb-3 text-success">Field Locations</h4>
            <div id="fieldMap" style="height: 400px; background-color: #e9ecef;"></div>
        </div>
    </div>

    <!-- Add Field Modal -->
    <div class="modal fade" id="addFieldModal" tabindex="-1" aria-labelledby="addFieldModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-success" id="addFieldModalLabel">Add New Field</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addFieldForm">
                        <!-- Field ID (Auto-Generated) -->
                        <div class="mb-3">
                            <label for="fieldId" class="form-label">Field ID</label>
                            <input type="text" class="form-control" id="fieldId" readonly value="FLD-1234">
                        </div>

                        <!-- Field Name -->
                        <div class="mb-3">
                            <label for="fieldName" class="form-label">Field Name</label>
                            <input type="text" class="form-control" id="fieldName" placeholder="Enter field name" required>
                        </div>

                        <!-- Size and Location -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="fieldSize" class="form-label">Size (Acres)</label>
                                <input type="number" class="form-control" id="fieldSize" placeholder="Enter field size" required>
                            </div>
                            <div class="col-md-6">
                                <label for="fieldLocation" class="form-label">Location</label>
                                <select class="form-control" id="fieldLocation" required>
                                    <option value="" disabled selected>Select Location</option>
                                    <option value="Farm A">Farm A</option>
                                    <option value="Farm B">Farm B</option>
                                    <option value="Farm C">Farm C</option>
                                </select>
                            </div>
                        </div>

                        <!-- Status -->
                        <div class="mb-3">
                            <label for="fieldStatus" class="form-label">Status</label>
                            <select class="form-control" id="fieldStatus" required>
                                <option value="" disabled selected>Select Status</option>
                                <option value="Planted">Planted</option>
                                <option value="Harvested">Harvested</option>
                                <option value="Needs Attention">Needs Attention</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-success w-100">Add Field</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<
<script>
    // Initialize Map (Example with Leaflet.js)
    document.addEventListener("DOMContentLoaded", function () {
        const map = L.map('fieldMap').setView([51.505, -0.09], 13); // Default location

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Example Markers
        L.marker([51.505, -0.09]).addTo(map).bindPopup("North Field").openPopup();
        L.marker([51.515, -0.1]).addTo(map).bindPopup("South Field");
    });

    // Search Functionality
    document.getElementById("searchField").addEventListener("input", function () {
        const searchQuery = this.value.toLowerCase();
        const rows = document.querySelectorAll("#fieldsTable tr");
        rows.forEach(row => {
            const rowText = row.innerText.toLowerCase();
            row.style.display = rowText.includes(searchQuery) ? "" : "none";
        });
    });

    // Add Field Form Submission
    document.getElementById("addFieldForm").addEventListener("submit", function (event) {
        event.preventDefault();
        alert("New field added!");
        $('#addFieldModal').modal('hide');
    });

    // Example Functions for Edit/Delete
    function editField(id) {
        alert("Edit functionality for field " + id);
    }

    function deleteField(id) {
        const confirmDelete = confirm("Are you sure you want to delete field " + id + "?");
        if (confirmDelete) {
            alert("Deleted field " + id);
        }
    }
</script>
